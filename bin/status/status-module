#!/bin/bash
#
# Gets the current status of the module (git)

. $HOME/.tixrc

### if no arguments, throw an error
if [ $# -eq 0 ]; then
  >&2 echo "${RED}--Must specify a module to check status for...--${NC}"
  exit 1
fi

module_name=$1
module_dir=${2-$module_name}
module_root="$MODULE_ROOT/$module_dir"
module_url="$GITHUB_URL_TIX/$module_name"


### if module not cloned, throw an error
if [ ! -d $module_root ]; then
  >&2 echo "${RED}--Module $module_name does not exist at $module_root...--${NC}"
  exit 1
fi

pushd $module_root >/dev/null
  git status 2>&1 | grep -qi "modified" && >&2 echo -e "${RED}Module $module_name has been modified.${NC}" && exit 1 || >&2 echo "Module $module_name is clean." && exit 0
popd >/dev/null