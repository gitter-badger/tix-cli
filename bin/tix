#!/bin/bash
#
# This script prepares the tix-cli dependencies and starts it.

set -e
OPTIND=1

. tix-init

while getopts "c" opt; do
    case "$opt" in
    c)
        echo "Cleaning previous installation..."
        npm install -g rimraf
        rimraf $CONFIG_PATH
        rimraf $NPMRC_PATH
        rimraf $CLI_ROOT
        echo "Cleaning complete."
        ;;
    \?)
        exit 1
        ;;
    esac
done


if [ ! -e $CLI_PATH ]; then
  install-cli
fi

echo "Executing CLI at $CLI_PATH..."
node "${CLI_PATH}"