#!/bin/bash
#
# This script installs optional applications

source $HOME/.tixrc

### General packages
if hash curl 2>/dev/null; then
  if ! hash ack 2>/dev/null; then
    ### ack: Fast file searching
    echo "Installing ack..."
    curl http://beyondgrep.com/ack-2.14-single-file > "${LOCAL_BIN_ROOT}/ack"
    echo "ack installed successfully."
  fi
fi

### Brew / pacman packages
### ag (the_silver_searcher): extremely fast file searching
if hash brew 2>/dev/null; then
  brew install the_silver_searcher
elif hash pacman 2>/dev/null; then
  pacman -S the_silver_searcher
fi


if [ "$PNAME" = "windows" ]; then
  ### ag: the_silver_searcher
  if ! hash ag 2>/dev/null; then
    echo "Installing ag via choco..."
    choco install ag --yes --force &>/dev/null
    echo "ag installed successfully."
  fi

  ### sysinternals: process explorer
  ### Good for looking at windows processes, file locking, etc.
  procexp_url="https://download.sysinternals.com/files/ProcessExplorer.zip"
  procexp_path="${LOCAL_BIN_ROOT}/procexp.exe"
  mkdir -p $SRC_ZIP_ROOT
  pushd $SRC_ZIP_ROOT
  curl -L $procexp_url >ProcessExplorer.zip
  unzip -po ProcessExplorer.zip procexp.exe >$proc_exp_path
  popd
fi