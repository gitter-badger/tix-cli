#!/bin/bash
#
# This script installs the tix-cli

set -e

. $HOME/.tixrc

echo "--Installing CLI to $CLI_ROOT...--"
mkdir -p "$MODULE_ROOT"
pushd "$MODULE_ROOT" >/dev/null
  if [ -d "$CLI_ROOT" ];then
    rimraf "$CLI_ROOT"
  fi

  >&2 echo "--Cloning $GITHUB_URL_CLI--"
  git clone --depth 1 $GITHUB_URL_CLI >/dev/null
  pushd "$CLI_ROOT" >/dev/null
    >&2 echo "--Cleaning up unnecessary stuff--"
    rimraf .git
    rimraf .gitignore
    rimraf .settings
    rimraf img
    rimraf src

    >&2 echo "--Installing NPM Components...--"
    npm install minimist --save &>/dev/null
    npm install shelljs --save &>/dev/null
    npm install lodash --save &>/dev/null
    npm install colors --save &>/dev/null
    npm install read --save &>/dev/null
    npm install q --save &>/dev/null
    npm install ftp --save &>/dev/null
    >&2 echo -e "${GREEN}--NPM Components installed successfully--${NC}"
  popd >/dev/null
popd >/dev/null

>&2 echo -e "${GREEN}--CLI installed successfully--${NC}"
