#!/bin/bash
#
# Git commits and NPM publishes the ~/tixinc/tix-cli-src module

message=${@-"Updates to tix-cli"}
cliSrcPath=~/tixinc/tix-cli-src


if [ ! -d $cliSrcPath ]; then
  echo Directory $cliSrcPath does not exist, exiting...
  exit 1
fi

pushd $cliSrcPath

git add .
git commit -am "$message"
npm version patch
npm publish
git push origin master

popd

echo NPM published and changes pushed successfully!